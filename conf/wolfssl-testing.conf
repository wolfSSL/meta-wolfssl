# wolfSSL Testing Configuration
# This file is automatically included by the testing framework
# to enable all features needed for testing images

# =============================================================================
# FIPS Configuration (Mock setup for testing)
# =============================================================================

# Use standard wolfSSL for testing (not FIPS)
# FIPS images will skip if real FIPS bundle is not available
PREFERRED_PROVIDER_virtual/wolfssl = "wolfssl"
PREFERRED_PROVIDER_wolfssl = "wolfssl"

# Mock FIPS configuration to allow parsing
# Real FIPS builds require commercial bundles from wolfssl.com
WOLFSSL_VERSION ??= "5.8.4"
WOLFSSL_SRC ??= "wolfssl-5.8.4"
WOLFSSL_SRC_SHA ??= ""
WOLFSSL_SRC_PASS ??= ""
WOLFSSL_LICENSE ??= ""
WOLFSSL_LICENSE_MD5 ??= ""
FIPS_HASH ??= "0000000000000000000000000000000000000000000000000000000000000000"
WOLFSSL_FIPS_HASH_MODE ??= "manual"

# =============================================================================
# TPM Configuration (for wolftpm and related images)
# =============================================================================

# Enable TPM support for images that need it
# Note: These are appended, not set, so they won't override existing values
DISTRO_FEATURES:append = " security tpm tpm2"
MACHINE_FEATURES:append = " tpm tpm2"

# Kernel TPM features
KERNEL_FEATURES:append = " features/tpm/tpm.scc"

# =============================================================================
# Security Features
# =============================================================================

# Enable general security features needed by various images
DISTRO_FEATURES:append = " pam"

# =============================================================================
# Additional Packages
# =============================================================================

# Ensure Python is available for wolfssl-py images
DISTRO_FEATURES:append = " python3"
